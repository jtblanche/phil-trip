{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"express\"","webpack:///./server/routes/resources/hashedPass.js","webpack:///./index.js","webpack:///./server/index.js","webpack:///./server/routes/index.js","webpack:///./server/routes/s3.js","webpack:///external \"react-s3-uploader/s3router\"","webpack:///./server/routes/login.js","webpack:///external \"bcryptjs\"","webpack:///external \"jsonwebtoken\"","webpack:///./server/routes/activities.js","webpack:///./server/routes/resources/protectedRoute.js","webpack:///external \"express-jwt\"","webpack:///external \"body-parser\"","webpack:///external \"morgan\"","webpack:///./server/models/index.js","webpack:///external \"sequelize\"","webpack:///./server/models/users.js","webpack:///./server/models/user-receipts.js","webpack:///./server/models/receipts.js","webpack:///./server/models/receipt-types.js","webpack:///./server/models/payments.js","webpack:///./server/models/payment-methods.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","getHash","password","Promise","resolve","reject","bcrypt","hash","err","res","compareHash","hashPass","compare","express","bodyParser","logger","db","app","PORT","process","env","use","json","static","__dirname","apiRoutes","req","sendFile","sequelize","sync","then","listen","console","log","router","Router","routes","s3","login","activities","bucket","getFileKeyDir","uniquePrefix","jwt","post","body","send","status","User","findOne","where","username","found","sign","id","JWT_SECRET","accessCode","error","user","firstName","lastName","email","newUser","secret","protectedRoute","next","Sequelize","config","use_env_variable","database","UserReceipt","Receipt","ReceiptType","Payment","PaymentMethod","keys","forEach","modelName","associate","DataTypes","define","primaryKey","type","UUID","defaultValue","UUIDV4","allowNull","STRING","validate","isEmail","unique","models","belongsToMany","through","hasMany","foreignKey","cost","INTEGER","description","total","tax","tip","belongsTo","paid","BOOLEAN"],"mappings":"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","file":"index.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = require(\"express\");","import bcrypt from 'bcryptjs';\n\nconst compareHash = (password, hashPass) => {\n    return new Promise((resolve, reject) => {\n        bcrypt.compare(password, hashPass, (err, res) => {\n            if (err || !res) {\n                return reject();\n            }\n            resolve(true);\n        })\n    })\n}\n\nconst getHash = (password) => {\n    return new Promise((resolve, reject) => {\n        bcrypt.hash(password, 10, (err, res) => {\n            if (err) {\n                return reject();\n            }\n            resolve(res);\n        })\n    })\n}\n\nexport default { getHash, compareHash };","import apiRoutes from './server';\nconst express = require(\"express\");\nconst bodyParser = require(\"body-parser\");\nconst logger = require(\"morgan\");\nvar db = require(\"./server/models\");\n\nconst app = express();\n\nconst PORT = process.env.PORT || 8321; // Sets an initial port. We'll use this later in our listener\n\napp.use(logger(\"dev\"));\napp.use(bodyParser.json());\n\napp.use(express.static(`${__dirname}/client/build`));\n\napp.use(apiRoutes);\n\n// Any non API GET routes will be directed to our React App and handled by React Router\napp.get(\"*\", (req, res) => {\n    res.sendFile(`${__dirname}/client/build/index.html`);\n});\n\ndb.sequelize.sync().then(function() {\n  app.listen(PORT, function() {\n    console.log(\"App listening on PORT: \" + PORT);\n  });\n});","import routes from './routes';\nimport express from 'express';\nconst router = express.Router();\nrouter.use('/api', routes);\nexport default router;","import s3 from './s3.js';\nimport login from './login.js';\nimport activities from './activities.js';\nimport express from 'express';\nconst router = express.Router();\nrouter.use('/', s3);\nrouter.use('/', login);\nrouter.use('/activities', activities);\nexport default router;","import express from 'express';\nconst router = express.Router();\nrouter.use('/', require('react-s3-uploader/s3router')({\n    bucket: \"bixygroups\",\n    getFileKeyDir: () => \"pbp\",\n    uniquePrefix: true // (4.0.2 and above) default is true, setting the attribute to false preserves the original filename in S3\n  }));\nexport default router;","module.exports = require(\"react-s3-uploader/s3router\");","import express from 'express';\nimport hashPass from './resources/hashedPass.js';\nimport db from '../models';\nvar jwt = require('jsonwebtoken');\nconst router = express.Router();\nrouter.post('/hash', (req, res) => {\n    hashPass.getHash(req.body.password).then((hash) => {\n        res.send(hash);\n    }, () => {\n        res.status(500).send();\n    })\n});\nrouter.post('/login', (req, res) => {\n    db.User.findOne({\n        where: {\n            username: req.body.username\n        }\n    }).then(found => {\n        if (found) {\n            hashPass.compareHash(req.body.password, found.password).then(() => {\n                res.json(jwt.sign({ username: req.body.username, password: req.body.password, id: found.id }, process.env.JWT_SECRET));\n            }, () => {\n                res.status(401).send();\n            })\n        } else {\n            res.status(401).send();\n        }\n    }, () => {\n        res.status(401).send();\n    });\n});\nrouter.post('/register', (req, res) => {\n    if (req.body.accessCode === \"pajouxparty\") {\n        hashPass.getHash(req.body.password).then((hash) => {\n            const user = {\n                username: req.body.username,\n                password: hash,\n                firstName: req.body.firstName,\n                lastName: req.body.lastName,\n                email: req.body.email\n            }\n            db.User.create(user).then(newUser => res.json(jwt.sign({ username: newUser.username, id: newUser.id, password: newUser.password }, process.env.JWT_SECRET)), \n            error => res.status(401).json(error));\n        }, () => {\n            res.status(500).send();\n        });\n        return;\n    }\n    res.status(401).json({error: {accessCode: \"Incorrect Access Code.\"}});\n});\nexport default router;","module.exports = require(\"bcryptjs\");","module.exports = require(\"jsonwebtoken\");","import express from 'express';\nimport protectedRoute from './resources/protectedRoute';\nvar jwt = require('express-jwt');\nconst router = express.Router();\nrouter.get('/', jwt({ secret: process.env.JWT_SECRET }), protectedRoute, (req, res) => {\n    res.json(['activity 1', 'activity 2', 'activity 3']);\n});\nexport default router;","import hashPass from './hashedPass';\nimport db from '../../models';\nexport default (req, res, next) => {\n    if (!req.user || !req.user.id || !req.user.username || !req.user.password) {\n        return res.status(401).send();\n    }\n\n    db.User.findOne({\n        where: {\n            username: req.user.username\n        }\n    }).then(found => {\n        if (found) {\n            return hashPass.compareHash(req.user.password, found.password).then(() => {\n                console.log('test');\n                return next();\n            }, () => {\n                res.status(401).send();\n            })\n        } else {\n            return res.status(401).send();\n        }\n    }, () => {\n        return res.status(401).send();\n    });\n}","module.exports = require(\"express-jwt\");","module.exports = require(\"body-parser\");","module.exports = require(\"morgan\");","var Sequelize = require(\"sequelize\");\nvar env = process.env.NODE_ENV || \"development\";\nvar config = require(__dirname + \"/../config/config.json\")[env];\n\nif (config.use_env_variable) {\n  var sequelize = new Sequelize(process.env[config.use_env_variable]);\n} else {\n  var sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\nvar db = {\n  User: require('./users.js')(sequelize, Sequelize),\n  UserReceipt: require('./user-receipts.js')(sequelize, Sequelize),\n  Receipt: require('./receipts.js')(sequelize, Sequelize),\n  ReceiptType: require('./receipt-types.js')(sequelize, Sequelize),\n  Payment: require('./payments.js')(sequelize, Sequelize),\n  PaymentMethod: require('./payment-methods.js')(sequelize, Sequelize),\n};\n\nObject.keys(db).forEach(function(modelName) {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\nconsole.log(db);\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\nmodule.exports = db;\n","module.exports = require(\"sequelize\");","module.exports = function(sequelize, DataTypes) {\n  var User = sequelize.define(\"User\", {\n    // Giving the Store model a name of type STRING\n    id: {\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n      allowNull: false\n    },\n    firstName:  {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    lastName:  {\n      type: DataTypes.STRING,\n      allowNull: false\n    },\n    email: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      validate: {\n        isEmail: true\n      }\n    },\n    username:  {\n      type: DataTypes.STRING,\n      unique: true,\n      allowNull: false\n    },\n    password:  {\n      type: DataTypes.STRING,\n      allowNull: false\n    }\n  });\n\n  User.associate = function(models) {\n    // Associating Store with Posts\n    // When an Store is deleted, also delete any associated Posts\n    User.belongsToMany(models.Receipt, {\n      through: models.UserReceipt\n    });\n    User.hasMany(models.PaymentMethod);\n\n    User.hasMany(models.Payment, {\n      foreignKey: 'pay_to'\n    });\n    User.hasMany(models.Payment, {\n        foreignKey: 'pay_from'\n    });\n  };\n\n  return User;\n};\n","module.exports = function(sequelize, DataTypes) {\n    var UserReceipt = sequelize.define(\"UserReceipt\", {\n      cost: DataTypes.INTEGER\n    });\n  \n    return UserReceipt;\n  };\n  ","module.exports = function(sequelize, DataTypes) {\n  var Receipt = sequelize.define(\"Receipt\", {\n    // Giving the Product model a name of type STRING\n    id: {\n      primaryKey: true,\n      type: DataTypes.UUID,\n      defaultValue: DataTypes.UUIDV4,\n    },\n    description: DataTypes.STRING,\n    total: DataTypes.INTEGER,\n    tax: DataTypes.INTEGER,\n    tip: DataTypes.INTEGER\n  });\n\n  Receipt.associate = function(models) {\n    // Associating Product with Posts\n    // When an Product is deleted, also delete any associated Posts\n    Receipt.belongsToMany(models.User, {\n      through: models.UserReceipt\n    });\n    Receipt.belongsTo(models.ReceiptType);\n  };\n\n  return Receipt;\n};\n","module.exports = function(sequelize, DataTypes) {\n    var ReceiptType = sequelize.define(\"ReceiptType\", {\n      // Giving the Product model a name of type STRING\n      description: DataTypes.STRING\n    });\n  \n    ReceiptType.associate = function(models) {\n      // Associating Product with Posts\n      // When an Product is deleted, also delete any associated Posts\n      ReceiptType.hasMany(models.Receipt);\n    };\n  \n    return ReceiptType;\n  };","module.exports = function(sequelize, DataTypes) {\n    var Payment = sequelize.define(\"Payment\", {\n      // Giving the Product model a name of type STRING\n      id: {\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      cost: DataTypes.INTEGER,\n      paid: { type: DataTypes.BOOLEAN, allowNull: false, defaultValue: false }\n    });\n  \n    Payment.associate = function(models) {\n      // Associating Product with Posts\n      // When an Product is deleted, also delete any associated Posts\n      Payment.belongsTo(models.User, {\n          foreignKey: 'pay_to'\n      });\n      Payment.belongsTo(models.User, {\n          foreignKey: 'pay_from'\n      });\n    };\n  \n    return Payment;\n  };","module.exports = function(sequelize, DataTypes) {\n    var PaymentMethod = sequelize.define(\"PaymentMethod\", {\n      // Giving the Product model a name of type STRING\n      id: {\n        primaryKey: true,\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      description: DataTypes.STRING\n    });\n  \n    PaymentMethod.associate = function(models) {\n      // Associating Product with Posts\n      // When an Product is deleted, also delete any associated Posts\n      PaymentMethod.belongsTo(models.User);\n    };\n  \n    return PaymentMethod;\n  };"],"sourceRoot":""}